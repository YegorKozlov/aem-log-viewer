<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0" xmlns:granite="http://www.adobe.com/jcr/granite/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0"
    jcr:mixinTypes="[granite:FinalArea,sling:VanityPath]"
    jcr:primaryType="nt:unstructured"
    jcr:title="Remote Logs"
    sling:resourceType="granite/ui/components/shell/collectionpage"
    consoleId="logHosts"
    contentPath="/content"
    currentView="${state[&quot;shell.collectionpage.layoutId&quot;].string}"
    modeGroup="log-hosts-task-collection"
    pageURITemplate="/libs/granite/operations/content/diagnosis.html"
    targetCollection=".log-hosts-task-collection">
    <head jcr:primaryType="nt:unstructured">
        <clientlibs
            jcr:primaryType="nt:unstructured"
            sling:resourceType="granite/ui/components/coral/foundation/includeclientlibs"
            categories="[coralui3,granite.ui.coral.foundation,e2e-tools.log-viewer,e2e-tools.log-viewer]"/>
    </head>
    <views jcr:primaryType="nt:unstructured">
        <card
            granite:class="log-hosts-task-collection"
            jcr:primaryType="nt:unstructured"
            jcr:title="Card View"
            sling:resourceType="granite/ui/components/coral/foundation/masonry"
            icon="viewCard"
            layoutId="card"
            limit="{Long}20"
            selectionCount="single"
            selectionMode="{Boolean}false"
            size="40"
            stateId="shell.collectionpage">
            <datasource
                jcr:primaryType="nt:unstructured"
                sling:resourceType="e2e-tools/components/tools/log-viewer/hostdatasource"
                itemResourceType="e2e-tools/components/tools/log-viewer/hostentry"
                limit="10"
                offset="0"
                path="${requestPathInfo.suffix}"/>
            <granite:data
                jcr:primaryType="nt:unstructured"
                foundation-mode-group="log-hosts-task-collection"/>
        </card>
    </views>
    <actions jcr:primaryType="nt:unstructured">
        <primary jcr:primaryType="nt:unstructured">
            <back
                granite:hidden="{Boolean}true"
                granite:id="backButton"
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/anchorbutton"
                href="/libs/granite/operations/content/healthreports/healthreportlist.html"
                icon="chevronLeft"
                variant="actionBar"/>
            <add
                granite:class="foundation-toggleable-control"
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/button"
                href="#"
                icon="addCircle"
                text="Add"
                variant="actionBar"
                x-cq-linkchecker="skip">
                <granite:data
                    jcr:primaryType="nt:unstructured"
                    foundation-toggleable-control-action="show"
                    foundation-toggleable-control-target="#modalConfigureHost"/>
            </add>
        </primary>
        <secondary jcr:primaryType="nt:unstructured"/>
        <selection jcr:primaryType="nt:unstructured">
            <configure
                granite:hidden="{Boolean}true"
                granite:id="configureHealthCheckButton"
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/anchorbutton"
                foundation-collection-action="\{&quot;target&quot;:&quot;.granite-health-reports-collection&quot;, &quot;activeSelectionCount&quot;:&quot;single&quot;}"
                href="/system/console/configMgr"
                icon="gear"
                target="_blank"
                text="Configure"
                variant="actionBar"
                x-cq-linkchecker="skip"/>
            <view
                granite:hidden="{Boolean}true"
                granite:id="viewHealthCheckDetailsButton"
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/anchorbutton"
                href="/system/console/configMgr"
                icon="browse"
                text="View"
                variant="actionBar"
                x-cq-linkchecker="skip"/>
            <delete
                jcr:primaryType="nt:unstructured"
                sling:resourceType="granite/ui/components/coral/foundation/collection/action"
                action="e2e-tools.dashboard.task.delete"
                activeSelectionCount="single"
                href=""
                icon="delete"
                target=".log-hosts-task-collection"
                text="Delete"
                variant="actionBar"
                x-cq-linkchecker="skip"/>
        </selection>
    </actions>
    <footer
        jcr:primaryType="nt:unstructured"
        sling:resourceType="granite/ui/components/coral/foundation/container">
        <items jcr:primaryType="nt:unstructured">
            <create
                granite:id="modalConfigureHost"
                jcr:primaryType="nt:unstructured"
                jcr:title="Configure Host"
                sling:resourceType="granite/ui/components/coral/foundation/dialog">
                <items jcr:primaryType="nt:unstructured">
                    <form
                        granite:id="createHostForm"
                        jcr:primaryType="nt:unstructured"
                        jcr:title="Configure Host"
                        sling:resourceType="granite/ui/components/coral/foundation/form"
                        action="/var/e2e/logs/*"
                        async="{Boolean}true"
                        enctype="application/x-www-form-urlencoded"
                        foundationForm="{Boolean}true"
                        method="POST"
                        style="vertical">
                        <items jcr:primaryType="nt:unstructured">
                            <name
                                granite:id="configureHost-name"
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                emptyText="Name"
                                name="./name"/>
                            <host
                                granite:id="configureHost-host"
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/form/textfield"
                                emptyText="http://localhost:4502"
                                name="./host"/>
                            <resourceType
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/form/hidden"
                                ignoreData="{Boolean}true"
                                name="./sling:resourceType"
                                value="e2e-tools/components/tools/log-viewer/hostentry"/>
                            <primaryType
                                jcr:primaryType="nt:unstructured"
                                sling:resourceType="granite/ui/components/coral/foundation/form/hidden"
                                name="./jcr:primaryType"
                                value="nt:unstructured"/>
                        </items>
                        <successresponse
                            jcr:primaryType="nt:unstructured"
                            sling:resourceType="granite/ui/components/coral/foundation/form/responses/reload"
                            target=".cq-workflow-admin-models"/>
                    </form>
                </items>
                <footer jcr:primaryType="nt:unstructured">
                    <cancel
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/button"
                        text="Cancel">
                        <parentConfig
                            jcr:primaryType="nt:unstructured"
                            close="{Boolean}true"/>
                    </cancel>
                    <submit
                        granite:id="createHostFormSubmitBtn"
                        jcr:primaryType="nt:unstructured"
                        sling:resourceType="granite/ui/components/coral/foundation/button"
                        formId="createHostForm"
                        text="Submit"
                        type="submit"
                        variant="primary">
                        <parentConfig
                            jcr:primaryType="nt:unstructured"
                            close="{Boolean}true"/>
                    </submit>
                </footer>
            </create>
        </items>
    </footer>
</jcr:root>
